---
description: 
globs: 
alwaysApply: true
---
---
description: "Voici le workflow que je souhaite adaptÃ©, il va fallois que tu le suive de A Ã  Z dans le dÃ©veloppement du bot"
globs: 
alwaysApply: true
---

## Workflow
1. EntrÃ©e et Validation
   - Prospect remplit Typeform
   - Validation immÃ©diate des donnÃ©es
   - DÃ©tection des doublons
   - VÃ©rification SIRET

2. Enrichissement (une fois les donnÃ©es typeform reÃ§ues sur la table 'companies' dans supabase)
   - Appel API INSEE
   - RÃ©cupÃ©ration codes NAF et des autres colonnes comme dÃ©fini dans [tables-companies.mdc](mdc:.cursor/rules/tables-companies.mdc)
   - Mise en cache des donnÃ©es frÃ©quentes

3. Matching Initial
   - PrÃ©-scoring basÃ© sur rÃ¨gles simples
   - Appel API les-aides.fr
   - Filtrage prÃ©liminaire des aides

4. Analyse IA
   - Claude AI analyse dÃ©taillÃ©e
   - Scoring pondÃ©rÃ©
   - VÃ©rification des critÃ¨res spÃ©cifiques

5. Post-Processing
   - AgrÃ©gation des scores
   - Validation des critÃ¨res obligatoires
   - Classification finale

6. Communication
   - Message Slack dÃ©taillÃ© via Bot Slack
   - âœ… Aides recommandÃ©es (score > 85)
   - ğŸŸ¡ Aides potentielles (score 70-85)
   - âš ï¸ Aides Ã  vÃ©rifier (score < 70)

7. Suivi
   - Enregistrement des interactions
   - Collecte du feedback
   - Mise Ã  jour du modÃ¨le